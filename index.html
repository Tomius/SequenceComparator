<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sequence Comparator Software</title>
  <link href="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.min.css" rel="stylesheet"/>
  <link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>Sequence Comparator Software</h1>
  <div id="app">
    <div style="display:none;">
      <h2>Merops data</h2>
      <div class="section">
        <p id="csvFileLabelBss">No file loaded</p>
        <button><label for="csvFileBss" id="csvLoadFileText">Load CSV File</label></button>
        <input type="file" id="csvFileBss" style="display:none;" accept=".csv">
      </div>
      <hr/>
    </div>

    <table><tr>
      <td style="width: 700px; vertical-align:top ">
        <div class="section">
          <h2>Best Sequence Search</h2>
          <span class="extra-info"><i>
            <p>
              This part of the software is designed to calculate natural amino acids sequences that can be cleaved by a Protease Of Interest (POI), regarding other proteases of the medium. Click on the Info buttons to be guided in the utilization of each parameter.
            </p>

            <p>
              Our recommendations for the software are:
            </p>

            <p>
              If you wish to use the “Search Best Sequence” button, you will only need to enter the proteases to consider and the POI for the first attempt (<span style="color:red;">red stars</span>). Then, you can adjust the sequence by excluding Amino Acids (AAs), or by increasing the minimal POI Score.
            </p>
            <p>
              If you wish to use the “Search All Sequence” button, you will only need to enter the proteases to consider and the POI for the first attempt (<span style="color:red;">red stars</span>). Then, you can adjust the sequence library by excluding Amino Acids (AAs) or by increasing the minimal POI Score or the minimal POI Selectivity.
            </p>
          </i></span>

          <details>
            <summary>
              <h3>Proteases to consider <span style="color:red">*</span>
                <span class="info">
                  <i class="icon-info-sign"></i>
                </span>
              </h3>
            </summary>
            <span class="extra-info">
              <p>
                Here, you may input every protease of the medium that is susceptible to cleave the sequence(s). If you do not know which one can cleave the sequence(s), you may input every known protease of the medium.
              </p>

              <p>
                You may search for proteases by their MEROPS code, their full name, or the MEROPS name given on the MEROPS website. Please be aware that proteases have several names: if you fail at inputting your protease, please try other names of this enzyme.
              </p>

              <p>
                You may delete a protease by clicking in the upper right corner of the protease box.
              </p>
            </span>
          </details>

          <select style="width: 500px; height: 30px" data-placeholder="Begin typing a name to filter..." id="ProteasesToConsiderBss" multiple class="chosen-select" name="ProteasesToConsiderBss">
          </select>
          <p style="color:red;display:none;" id="ProteasesToConsiderBssEmptyWarning">Please select the proteases to consider</p>

          <details>
            <summary>
              <h3>Amino acids to exclude
                <span class="info">
                  <i class="icon-info-sign"></i>
                </span>
              </h3>
            </summary>
            <span class="extra-info">
              <p>
                If you wish to exclude amino acid(s), you may select them here (for example, if you do not want acidic AAs for easy synthesis, or if you have too many sequences output with the “Search All Sequences” button).
              </p>

              <p>
                You may delete an AA by clicking in the upper right corner of the AA box.
              </p>

            </span>
          </details>
          <select style="width: 500px; height: 30px" data-placeholder="Begin typing a name to filter..." id="AminoAcidsToExclude" multiple class="chosen-select" name="AminoAcidsToExclude">
            <option>Ala</option>
            <option>Arg</option>
            <option>Asn</option>
            <option>Asp</option>
            <option>Cys</option>
            <option>Gln</option>
            <option>Glu</option>
            <option>Gly</option>
            <option>His</option>
            <option>Ile</option>
            <option>Leu</option>
            <option>Lys</option>
            <option>Met</option>
            <option>Phe</option>
            <option>Pro</option>
            <option>Ser</option>
            <option>Thr</option>
            <option>Trp</option>
            <option>Tyr</option>
            <option>Val</option>
          </select>

          <details>
            <summary>
              <h3>Protease of interest (POI) <span style="color:red;">*</span>
                <span class="info">
                  <i class="icon-info-sign"></i>
                </span>
              </h3>
            </summary>
            <span class="extra-info">
              Here, you may select the protease that will cleave your peptide. Its MEROPS values will be compared to the other ones of the medium, and the selectivity will be calculated from the comparison.
            </span>
          </details>
          <select name="ProteaseInterest" id="ProteaseInterest" class="chosen-select" style="width: 500px"> </select>

          <details>
            <summary>
              <h3>Minimal POI Score
                <small>range: [0,100]</small>
                <span class="info">
                  <i class="icon-info-sign"></i>
                </span>
              </h3>
            </summary>
            <span class="extra-info">
              Here, you may select the minimal MEROPS Score for your protease of interest. The MEROPS Score is a value describing the percentage of cleavages bearing a given amino acid at a given position, for any given protease. On the MEROPS website, the values are arranged in a table named “Specificity matrix”. The higher the POI Score, the higher the efficiency of the whole sequence, but the lower the selectivity.
            </span>
          </details>
          <input type="number" step="1" id="minPoiScore" />

          <details>
            <summary>
              <h3>Minimal POI Selectivity
                <small>range: [0,100]</small>
                <span class="info">
                  <i class="icon-info-sign"></i>
                </span>
              </h3>
            </summary>
            <span class="extra-info">
              Here, you may adjust the minimal selectivity of the AAs, to calculate only the most selective sequences. This option is useless for the “Search Best Sequence” button, but useful for the “Search All Sequences” button to deal with large libraries.
            </span>
          </details>
          <input type="number" step="1" id="minPoiSelectivity" />

          <table>
            <tr>
              <td><button id="searchBestSequence">Search Best Sequence</button></td>
              <td><button id="searchAllSequences">Search All Sequences</button></td>
            </tr>
          </table>
        </div>
      </td>
      <td style="width: 700px; vertical-align:top">
        <h2>Protease Score Calculation </h2>
        <span class="extra-info"><i>
          This part of the software is designed to calculate mean MEROPS Score of sequences for every protease in the medium. This part can be useful to determine the proteases with the highest efficiency and use them as selectivity controls in the experimental procedures. Click on the Info buttons to be guided in the utilization of each parameter.
        </i></span>

        <details>
          <summary>
            <h3>Amino acids <span style="color:red;">*</span>
              <span class="info">
                <i class="icon-info-sign"></i>
              </span>
            </h3>
          </summary>
          <span class="extra-info">
            Here, you only need to enter your sequence. If you wish to add less than 8 AAs, you may add only the positions of your choice.
          </span>
        </details>

        <table>
          <tr>
            <th>P4</th>
            <th>P3</th>
            <th>P2</th>
            <th>P1</th>
            <th>P1'</th>
            <th>P2'</th>
            <th>P3'</th>
            <th>P4'</th>
          </tr>
          <tr>
            <td><select style="width: 70px;" id="AA1" class="chosen-select-empty">
              <option value='' >&nbsp;</option>
              <option>Ala</option>
              <option>Arg</option>
              <option>Asn</option>
              <option>Asp</option>
              <option>Cys</option>
              <option>Gln</option>
              <option>Glu</option>
              <option>Gly</option>
              <option>His</option>
              <option>Ile</option>
              <option>Leu</option>
              <option>Lys</option>
              <option>Met</option>
              <option>Phe</option>
              <option>Pro</option>
              <option>Ser</option>
              <option>Thr</option>
              <option>Trp</option>
              <option>Tyr</option>
              <option>Val</option>
            </select></td>
            <td><select style="width: 70px;" id="AA2" class="chosen-select-empty">
              <option value='' >&nbsp;</option>
              <option>Ala</option>
              <option>Arg</option>
              <option>Asn</option>
              <option>Asp</option>
              <option>Cys</option>
              <option>Gln</option>
              <option>Glu</option>
              <option>Gly</option>
              <option>His</option>
              <option>Ile</option>
              <option>Leu</option>
              <option>Lys</option>
              <option>Met</option>
              <option>Phe</option>
              <option>Pro</option>
              <option>Ser</option>
              <option>Thr</option>
              <option>Trp</option>
              <option>Tyr</option>
              <option>Val</option>
            </select></td>
            <td><select style="width: 70px;" id="AA3" class="chosen-select-empty">
              <option value='' >&nbsp;</option>
              <option>Ala</option>
              <option>Arg</option>
              <option>Asn</option>
              <option>Asp</option>
              <option>Cys</option>
              <option>Gln</option>
              <option>Glu</option>
              <option>Gly</option>
              <option>His</option>
              <option>Ile</option>
              <option>Leu</option>
              <option>Lys</option>
              <option>Met</option>
              <option>Phe</option>
              <option>Pro</option>
              <option>Ser</option>
              <option>Thr</option>
              <option>Trp</option>
              <option>Tyr</option>
              <option>Val</option>
            </select></td>
            <td><select style="width: 70px;" id="AA4" class="chosen-select-empty">
              <option value='' >&nbsp;</option>
              <option>Ala</option>
              <option>Arg</option>
              <option>Asn</option>
              <option>Asp</option>
              <option>Cys</option>
              <option>Gln</option>
              <option>Glu</option>
              <option>Gly</option>
              <option>His</option>
              <option>Ile</option>
              <option>Leu</option>
              <option>Lys</option>
              <option>Met</option>
              <option>Phe</option>
              <option>Pro</option>
              <option>Ser</option>
              <option>Thr</option>
              <option>Trp</option>
              <option>Tyr</option>
              <option>Val</option>
            </select></td>
            <td><select style="width: 70px;" id="AA5" class="chosen-select-empty">
              <option value='' >&nbsp;</option>
              <option>Ala</option>
              <option>Arg</option>
              <option>Asn</option>
              <option>Asp</option>
              <option>Cys</option>
              <option>Gln</option>
              <option>Glu</option>
              <option>Gly</option>
              <option>His</option>
              <option>Ile</option>
              <option>Leu</option>
              <option>Lys</option>
              <option>Met</option>
              <option>Phe</option>
              <option>Pro</option>
              <option>Ser</option>
              <option>Thr</option>
              <option>Trp</option>
              <option>Tyr</option>
              <option>Val</option>
            </select></td>
            <td><select style="width: 70px;" id="AA6" class="chosen-select-empty">
              <option value='' >&nbsp;</option>
              <option>Ala</option>
              <option>Arg</option>
              <option>Asn</option>
              <option>Asp</option>
              <option>Cys</option>
              <option>Gln</option>
              <option>Glu</option>
              <option>Gly</option>
              <option>His</option>
              <option>Ile</option>
              <option>Leu</option>
              <option>Lys</option>
              <option>Met</option>
              <option>Phe</option>
              <option>Pro</option>
              <option>Ser</option>
              <option>Thr</option>
              <option>Trp</option>
              <option>Tyr</option>
              <option>Val</option>
            </select></td>
            <td><select style="width: 70px;" id="AA7" class="chosen-select-empty">
              <option value='' >&nbsp;</option>
              <option>Ala</option>
              <option>Arg</option>
              <option>Asn</option>
              <option>Asp</option>
              <option>Cys</option>
              <option>Gln</option>
              <option>Glu</option>
              <option>Gly</option>
              <option>His</option>
              <option>Ile</option>
              <option>Leu</option>
              <option>Lys</option>
              <option>Met</option>
              <option>Phe</option>
              <option>Pro</option>
              <option>Ser</option>
              <option>Thr</option>
              <option>Trp</option>
              <option>Tyr</option>
              <option>Val</option>
            </select></td>
            <td><select style="width: 70px;" id="AA8" class="chosen-select-empty">
              <option value='' >&nbsp;</option>
              <option>Ala</option>
              <option>Arg</option>
              <option>Asn</option>
              <option>Asp</option>
              <option>Cys</option>
              <option>Gln</option>
              <option>Glu</option>
              <option>Gly</option>
              <option>His</option>
              <option>Ile</option>
              <option>Leu</option>
              <option>Lys</option>
              <option>Met</option>
              <option>Phe</option>
              <option>Pro</option>
              <option>Ser</option>
              <option>Thr</option>
              <option>Trp</option>
              <option>Tyr</option>
              <option>Val</option>
            </select></td>
          </tr>
        </table>
        <p style="color:red;display:none;" id="AminoAcidsEmptyWarning">Please specify an amino acid for least one position</p>
        <details>
          <summary>
            <h3>Proteases to consider <span style="color:red;">*</span>
              <span class="info">
                <i class="icon-info-sign"></i>
              </span>
            </h3>
          </summary>
          <span class="extra-info">
            <p>
              Here, you may input every protease of the medium that is susceptible to cleave the sequence(s). If you do not know which one can cleave the sequence(s), you may input every known protease of the medium.
            </p>

            <p>
              You may search for proteases by their MEROPS code, their full name, or the MEROPS name given on the MEROPS website. Please be aware that proteases have several names: if you fail at inputting your protease, please try other names of this enzyme.
            </p>

            <p>
              You may delete a protease by clicking in the upper right corner of the protease box.
            </p>
          </span>
        </summary>
      </details>
      <select style="width: 500px; height: 30px" data-placeholder="Begin typing a name to filter..." id="ProteasesToConsiderPsc" multiple class="chosen-select" name="ProteasesToConsiderPsc">
      </select>
      <p style="color:red;display:none;" id="ProteasesToConsiderPscEmptyWarning">Please select the proteases to consider</p>
      <div>
        <button id="StartPsc">Start Calculation</button>
      </div>
    </td>
  </tr></table>
  <div id="searchResults"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.jquery.min.js"></script>
<script>  
  $(".chosen-select-empty").chosen({ allow_single_deselect:true });
  $(".chosen-select").chosen();
</script>
<script src="merops_data.js"></script>
<script src="BestSequenceSearch.js"></script>
<script src="ProteaseScoreCalculation.js"></script>
<script src="script.js"></script>
</body>
</html>
